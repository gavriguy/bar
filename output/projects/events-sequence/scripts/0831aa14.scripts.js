"use strict";var cmsApp=angular.module("cmsApp",["angular-underscore"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]);cmsApp.filter("range",function(){return function(a,b){b=parseInt(b);for(var c=0;c<b;c++)a.push(c);return a}}),cmsApp.directive("remove",function(){return function(a,b,c){b.bind("click",function(a){b.parent().parent().parent().parent().fadeOut()})}}),"use strict";var MainCtrl=["$scope","$timeout","$filter",function(a,b,c){function e(){a.showForm=!1,b(function(){a.showForm=!0},10)}function f(){a.name="",a.start="",a.end=""}function g(b){var c=_.findWhere(a.events,{id:b});return _.indexOf(a.events,c)}b(function(){$("#chooseID").joyride({})},500),a.episodeDuration="01:05:00",a.activeEvent="new",a.showForm=!0;var d=!1;a.onEditMode=function(){return a.myForm.$dirty},a.eventTitle=function(){return a.activeEvent=="new"?"Add new event":"Edit"},a.events=[{id:"first",name:"Who is going to win the battle",type:"poll",start:"00:00:20",end:"00:00:40"},{id:"second",name:"Choose your prefered character",type:"poll",start:"00:00:01",end:"00:00:05"},{id:"outOfTimeFrame",name:"Choose your prefered character",type:"poll",start:"01:10:21",end:"01:10:43"}],a.newEvent=function(){a.activeEvent="new",e(),f()},a.saveEvent=function(){var b,c={name:this.name,type:this.type,start:this.start,end:this.end};if(a.activeEvent!="new"){b=g(a.activeEvent);var d=_.extend(a.events[b],c);a.events[b]=d,a.newestEventId=d.id}else c.id=(new Date).getTime(),a.events.push(c),a.newestEventId=c.id;f(),a.activeEvent="new",this.myForm.$setPristine(),e()},a.deleteEvent=function(c){d=!0,b(function(){a.events.splice(g(c),1),f(),a.newEvent(),d=!1},200)},a.editEvent=function(b){if(d)return;var c=g(b.id);a.name=a.events[c].name,a.type=a.events[c].type,a.start=a.events[c].start,a.end=a.events[c].end,a.activeEvent=b.id,e()},a.isSelected=function(b){return a.activeEvent==b?"selected":""},a.isTimeError=function(b){return parseInt(a.episodeDuration.replace(/:/gi,""))<parseInt(b.replace(/:/gi,""))?"time-error":""},a.isNew=function(b){return a.newestEventId==b?"fadeInDown":""},a.cancel=function(){a.activeEvent="new",f(),this.myForm.$setPristine()}}];